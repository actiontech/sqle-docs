---
title: SQL审核
---
# SQL快捷审核

本文介绍平台的SQL审核功能，该功能可以帮助用户快速审核SQL并了解优化建议。

## 使用场景

1. 开发场景：开发人员在提交SQL变更前进行自检，及早发现潜在问题
2. 运维场景：DBA批量审核大量SQL语句，确保符合规范
3. 变更管理：运维人员在变更窗口前检查SQL语句的合规性和性能

相较于SQL工单，SQL审核更注重用户快速自检，其目的是获取审核结果。而SQL工单除了获取平台的审核结果外，更侧重SQL的标准化上线。

## 前置条件

用户需要进入项目页面才能使用SQL审核功能。

## 操作步骤

用户点击左侧菜单栏的SQL审核标签，进入SQL审核列表页面，点击'新建'按钮。

### 配置审核标签

标签用于对SQL进行分类管理：
* 系统预置标签：
  * 全量
  * 增量
* 可根据需要自定义新标签，建议按业务线或变更类型划分

### 选择审核模式

1. 离线审核
   * 特点：无需连接数据库，基于SQL语法进行审核
   * 适用场景：快速语法检查、规范性审核
   * 配置项：选择数据源类型和审核规则模板
   
2. 在线审核
   * 特点：连接实际数据库，可进行更深入的审核
   * 适用场景：性能分析、执行计划优化
   * 配置项：选择具体数据源和数据库，默认使用数据源上的审核规则模板
   * 注意：需要数据库访问权限

### 输入SQL语句

平台当前提供5种审核方式，以满足不同的SQL场景。

1. 在线输入
   * 直接在界面编辑器中输入SQL
   * 支持语法高亮和格式化
   * 适合简单SQL审核

2. 上传XML文件
   * 支持标准XML格式
   * 最大文件大小：20MB
   * 适合Mybatis等框架的SQL审核

3. 上传SQL文件
   * 支持.sql格式文件
   * 最大文件大小：10MB
   * 适合单个SQL文件审核

4. 上传ZIP文件
   * 支持.zip格式
   * 最大文件大小：50MB
   * 适合批量SQL文件审核
   
5. 配置GIT仓库
   * 支持公开及私有仓库
   * 需配置正确的访问凭证
   * 适合与版本控制系统集成


### 点击立即审核，获得审核结果

完成SQL输入后，用户点击`立即审核`按钮，获得平台给出的审核建议


## 执行结果
审核完成后，用户可以查看审核结果并在SQL审核列表中查看生成的审核记录。
![quick-audit](img/quick-audit.png)

## 后续操作
1. 在[SQL管控列表](user-manual/project/audit_task/sqlmanage.md)中查看添加了标签的审核记录
2. 根据审核建议优化SQL
3. 对于需要变更的SQL，可以创建SQL工单