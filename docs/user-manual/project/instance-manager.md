---
title: 数据源管理
---

# 数据源管理
本文介绍如何在项目中进行数据源管理，包括数据源的增加、删除、编辑操作。
数据源是工单和扫描任务的实施对象，用户在平台创建的工单和扫描任务都将针对指定的数据源执行。因而项目创建后需要首先配置项目内可用的数据源。

:::tip
数据源是SQLE连库审核的对象，任何审核的场景下若可以不选数据源则代表将进行脱库审核。
:::

### 使用场景
实际生产中，如果需要针对某个数据源下发SQL或创建扫描任务，需要首先将数据源添加至SQLE平台，测试连通成功后才可创建工单、创建扫描任务。

### 添加单个数据源

#### 使用场景
实际生产中，如果需要针对某个数据源下发SQL或创建扫描任务，需要首先将数据源添加至SQLE平台，测试连通成功后才可创建工单、创建扫描任务。

#### 前置操作
项目管理员进入指定的项目

#### 操作步骤
点击左侧导航栏的`数据源`菜单，进入数据源管理页面后，点击`添加数据源`，填写数据源相关信息

##### 基本信息
* 数据源名称：命名当前新建的数据源，如：actionsky-test；
* 数据源描述：用户可对数据源补充更多描述，便于用户通过名称+描述快速更精准地区分数据源；
* 数据库类型：选择数据库实例对应的数据库类型，当前支持的数据库类型包括MySQL、PostgreSQL、Oracle、SQL server、DB2、TiDB、OceanBase For MySQL、OceanBase For Oracle、Mycat、TDSQL for InnoDB、达梦；
* 数据库地址：输入数据库实例的连接地址，支持IP地址、域名两种方式；
* 数据库端口：添加数据源时根据数据源类型自动切换默认端口；
* 连接用户：输入数据库实例的连接用户，SQLE在执行SQL审核以及SQL上线时，会通过该连接用户访问数据库实例及下发SQL；
* 密码：输入数据库实例的连接用户密码；
##### 配置信息
* 审核规则模板：审核规则模板将用于创建工单时的审核、扫描任务的审核、SQL查询的审核；
* 运维时间：如果配置了运维时间, 工单将只能在运维时间内上线(立即上线和定时上线都受此影响), 支持配置多个运维时间, 默认无运维时间,即不限制上线时间；
* SQL查询是否需要审核：默认不审核；如用户选择开启该功能，则用户在SQL工作台中提交的SQL语句，将匹配审核规则模板进行SQL审核操作；
* 运行查询的最高审核等级：只有开启 SQL查询的审核功能才生效；支持四种审核等级：normal、notice、warn、error，如设置运行查询的最高审核等级为warn，则触发了warn等级规则以上的SQL语句将报错，并不予执行；未触发warn等级规则以上的SQL语句将被执行；

#### 执行结果
数据源添加成功后，可在数据源列表查看新增的数据源信息。

![数据源列表](./img/instance-manage.png)


### 批量添加数据源
为提高平台初始化效率，用户可通过上传CSV文件，快速批量导入多个数据源，减少手动添加工作量。此功能支持数据源的预检和连通性测试，确保数据源的有效性和可用性。

#### 使用场景
* 平台初始化时需导入大量数据源。
* 定期批量更新或添加数据源。
* 多项目数据源的集中管理和批量操作。

#### 前置操作
* 项目管理员进入指定的项目。
* 项目管理员/平台管理员进入项目列表。

#### 操作步骤
点击右上角的`批量导入数据源`按钮，进入批量导入数据源页面。

##### 获取导入模板
* 点击`下载导入模板`，获得下载文件。

##### 填写数据源信息

模板中包含的字段与[添加单个数据源](#添加单个数据源)中的信息保持一致。

##### 上传修改后的模板文件
导入后，SQLE平台将校验字段是否填写有误：
* 如导入文件没有问题，将在文件下方提示文件校验成功；
* 如导入文件有问题，将在文件下方提示文件校验失败，并自动下载标注了校验问题的文件，用户可以直接在文件中结合报错信息进行修改。

##### 批量测试数据源连通性
点击按钮后，平台将使用文件中的连接信息进行连通性测试：
* 如根据文件中的数据源连接信息均能连通，将在按钮下方提示连接成功；
* 如根据文件中的数据源连接信息存在连接不成功的，将在按钮下方提示连接不成功的数据源名称。

##### 点击导入
平台将按照文件中的数据源信息进行批量添加。


#### 执行结果
数据源添加成功后，可在数据源列表查看新增的数据源信息。

### 后续步骤
* 创建审核规则：添加数据源后，可针对指定数据源创建适用的审核规则，请参见[审核规则模板管理](rule-template-manager.md)。
* 添加成员/成员组：添加数据源后，需要引入成员/成员组对数据源进行操作，请参见[成员/成员组管理](group_member.md)。

### 更多管理功能
* 编辑数据源：点击数据源列表页面对应数据源条目后的`编辑`按钮，可以修改指定数据源。
    * 限制：数据源名称及数据库类型不支持修改，其他信息均可修改
* 删除数据源：点击数据源列表页面对应数据源条目后的`删除`按钮，可以删除指定数据源。
    * 限制：若数据源上还有相应工单未完成，则该数据源暂时不可删除
* 连通性测试：点击`更多`按钮，选择连通性测试，测试是否可以用当前的数据源地址及用户密码成功连入数据源。


