---
title: 登录对接
---
# 登录对接
当前登录对接已实现LDAP方式及Oauth2.0方式
## 入口
管理员账号，点击更多按钮，点击系统设置，跳转系统设置页面后，点击“对接登录”标签


## 推送方式
### LDAP
#### 功能说明
SQLE中支持通过配置的方式接入LDAP系统, 如同其他系统一样接受统一的用户管理, 以便于管理员管理SQLE中的用户, 也使得员工无需在使用一套公司内通用账号密码的同时单独记录SQLE的账号密码。
在SQLE中, 如果正确配置并启用了LDAP功能, 用户就可以在登录界面使用LDAP中记录的账号密码进行登录, SQLE会在员工第一次登录时同步此员工的账号和邮箱, 并在以后的登录中均通过LDAP校验此账户

#### 使用场景
当组织配置了LDAP对接登录系统时，平台管理员可进行相关配置。

#### 前置操作
已配置LDAP

#### 操作步骤
点击修改，选择启用LDAP

* LDAP服务器地址：用于LDAP登陆时SQLE找到LDAP服务器的位置
* LDAP服务器端口：用于LDAP登陆时SQLE找到LDAP服务的工作端口
* 连接用户DN：当用户登录时需要先使用管理用户登录到LDAP中查找出登录用户在LDAP中的DN, 再使用查找出的DN和登录用户填写的密码进行LDAP登录校验
* 连接用户密码：连接用户DN登录时的密码
* 查询根DN：用于限定SQLE中LDAP登录的作用范围
* 用户属性名：用于LDAP用户登录时查询登录用户的DN, LDAP中此属性对应的值也将用作此用户第一次登录SQLE自动注册时的用户名
* 用户邮箱属性名：SQLE将根据此属性名从LDAP中获取到用户的邮箱, 并将此邮箱用于此用户第一次登录SQLE自动注册时的用户邮箱

#### 后续操作
修改后用户即可通过LDAP账号登录SQLE平台

### OAuth 2.0【企业版】
#### 功能说明
SQLE中支持通过配置的方式接入OAuth 2.0系统, 如同其他系统一样接受统一的用户管理, 以便于管理员管理SQLE中的用户, 也使得员工无需在使用一套公司内通用账号密码的同时单独记录SQLE的账号密码

在SQLE中, 如果正确配置并启用了OAuth 2.0功能, 用户就可以在登录界面使用第三方登录, SQLE会在员工第一次登录时要求用户绑定或自动创建一个SQLE用户, 并在以后的登录中可以使用OAuth 2.0用户登录, 也可以用绑定的SQLE用户账号密码登录

#### 使用场景
当组织配置了OAuth 2.0对接登录系统时，平台管理员可进行相关配置。

#### 前置操作
已配置OAuth 2.0

#### 操作步骤
点击修改，选择启用OAuth 2.0

* **应用ID**：应用的唯一标识, 从要对接的平台申请 , 在OAuth2.0认证过程中，appid的值即为oauth_consumer_key的值
* **应用密钥**：与应用ID对应的密钥，用于验证应用访问用户资源的合法性。在 OAuth2.0 认证过程中，此密钥用作 oauth_consumer_secret 的值。
* **外部访问SQLE的地址**：用户通过第三方平台登录后，将被重定向到此地址。格式为 http(s)://ip:port
* **OAuth2.0登录授权页面地址**：用户在此页面授权应用访问其账户信息。格式为 http(s)://ip:port/xxx
* **OAuth2.0 access_token 获取地址**：用于获取访问令牌的地址，该令牌允许用户的应用访问用户资源。格式为 http(s)://ip:port/xxx
* **OAuth2 user id 获取地址**：用于获取用户ID的地址，该ID用于识别用户。格式为 http(s)://ip:port/xxx
* **注销跳转地址**：用户登出时，系统自动将浏览器重定向至此地址进行注销操作，以关闭第三方平台的会话信息。格式为 http://localhost:8080/logout?id_token_hint=$[id_token]&post_logout_redirect_url=$[sqle_url]
* **请求资源范围**：定义应用可以访问的资源范围，由验证服务器定义。
* **access_token Key名称**：指定在获取用户ID时，access_token 存储的键名。此参数会作为 GET 请求的参数发送给用户ID获取地址。
* **用户UID的JSON路径**：指定从第三方平台响应中解析用户ID的 JSON 路径。用户ID应当为唯一ID。
* **用户邮箱的JSON路径**：指定从第三方平台响应中解析用户邮箱的 JSON 路径。
* **用户微信ID的JSON路径**：指定从第三方平台响应中解析用户微信ID的 JSON 路径。
* **OAuth2.0 跳转按钮文字**：自定义登录页面上 OAuth2.0 登录按钮的显示文字。
* **登录权限查询GJSON表达式**：通过该表达式查询AccessToken载荷json，存在查询结果即有登录权限，不填默认有登录权限
* **自动创建并绑定用户**：若开启，在通过OAuth2登陆时，若该用户未绑定SQLE用户，SQLE则会根据从OAuth2服务端获取的用户id创建SQLE账户，并且不会跳转到绑定界面，而是进入SQLE主界面
* **默认登录密码**：系统自动创建的新用户将使用此密码作为初始登录密码，请妥善保存，平台将不会明文展示。此外，为保证账户安全，建议用户首次登录后及时修改密码。如果之前配置过该项，更新时不填写该项代表不更新密钥。
* **跳过请求来源验证**：跳过对请求发送来源的验证，可能增加安全风险。建议仅在可信环境下启用此选项。启用后，SQLE 将不再验证回调中的 state 参数。

:::tip
当仅允许内网访问SQLE服务时，请确保回调地址的后缀为"/v1/oauth2/callback"。
:::

#### 后续操作
启用后SQLE登录界面出现其他方式跳转登录入口，点击，可跳转至对应登录页面
